<!-- templates/manage_contacts/manage-contacts.html -->

{% extends "base.html" %}
{% block title %}Manage Contacts{% endblock %}

{% block head %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'manage_contacts/css/style.css' %}">
<script src="{% static "manage_contacts/js/script.js" %}"></script>
{% endblock head %}

{% block banner %}
<div class="flex-container app-banner">
  <div class="tab">
  <button class="js-tablinks" id="js-default-open" onclick="changePage(event, 'contacts-tab')">Contact List</button>
  <button class="js-tablinks" onclick="changePage(event, 'information-tab')">My Information</button>
  </div>
</div>
{% endblock banner %}

{% block logocontainer %}{% endblock logocontainer %}

{% block main %}
<div class="flex-container">
<h2 class="text-container"> Manage Contacts </h2>
</div>

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div id="contacts-tab" class="js-tabcontent">
  <script>document.getElementById("js-default-open").click();</script>

  <div class="flex-container">
    <div class="flex-container flex-row container-border">
      <p class="text-container left-text">
      This screen displays the contacts for a specific location, 
      or for the entire Organization. If you want to update your personal Information, 
      click on 'My Information' menu item above.
      </p>

      <div class="flex-widget">
        <a href="{% url 'add_contact' %}">New Contact</a>
      </div>
    </div>
  </div>

  <div class="flex-container">

    <div class="flex-widget widget-border"> 
      <p class="text-container">Filter Contacts Using the Fields Below</p>
      
      <form method = "GET">
      <input class="button" type="submit" value="Search"/>
      {{ filter_form }}
      </form>

      <form method="get">
      {% csrf_token %}
      <input class="button" type="submit" name="clear_search" value="Clear Search"/>
      </form>
    </div>
  </div>

  {% comment %} <div class="flex-container"> {% endcomment %}
      <div class="flex-container flex-center border-top">
        <h2 class="text-container border-bottom">Contacts</h2>
        <table>
          <tr> 
            <th>First Name</th>
            <th>Last Name</th> 
            <th>Web Login</th>
            <th>Contact Type</th>
            <th>Status</th> 
            <th>Location</th>
            <th>Country</th>
            <th>ORG ID</th> 
            <th>Email</th>
          </tr>

          {% for contact in contact_list %}
          <tr>
            <td>{{ contact.first_name }}</td>
            <td>{{ contact.last_name }}</td>
            <td>{{ contact.id }}</td>
            <td>{{ contact.role }}</td>
            <td>{{ contact.status }}</td>
            <td>{{ contact.id }}</td>
            <td>{{ contact.id }}</td>
            <td>{{ contact.org_id }}</td>
            <td>{{ contact.email }}</td>
          </tr>
          {% endfor %}
        </table>
    </div>
  {% comment %} </div> {% endcomment %}
</div>

<div id="information-tab" class="js-tabcontent">
  <div class="flex-container"> 
    <div class="flex-widget container-border">
      <h2 class="text-container">{{ user.username }}</h2>

        <div class="flex-widget">
          <p class="text-container">UserID: {{ user.id }}</p>
          <p class="text-container">UserEmail: {{ user_email }}</p>
          <p class="text-container">Role: {{ user_role }}</p>
          <p class="text-container">Org: {{ user_org }}</p>
          <p class="text-container">OrgID: {{ org_id }}</p>
        </div>

      <div class="flex-widget">
        <p><a href="{% url 'edit_contact' %}">Edit Contact</a></p>
      </div>
    </div> 
  </div>
</div>

<div class="flex-container flex-row border-top navigation-buttons">
<p><a href="{% url 'homepage' %}">Home</a></p>
<p><a href="{% url 'logout' %}">Logout</a></p>
</div>

{% endblock main %}
