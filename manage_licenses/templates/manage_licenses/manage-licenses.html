<!-- templates/manage_licenses/manage-licenses.html -->
{% extends "base.html" %}

{% block title %}Manage Licenses{% endblock title %}

{% block head %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'manage_licenses/css/style.css' %}">
<script src="{% static "manage_licenses/js/script.js" %}"></script>
{% endblock head %}

{% block header %}
<div class="flex-container flex-row widget-box">
  <div class="tab">
    <button class="js-tablinks" id="js-default-open" onclick="changePage(event, 'licenses-tab')">My licenses</button>
    <button class="js-tablinks" onclick="changePage(event, 'products-tab')">My products</button>
  </div>

  <div class="nav-row">
    <p><a href="{% url 'manage_contacts' %}">Contacts</a></p>
    <p><a href="{% url 'homepage' %}">Home</a></p>
    <p><a href="{% url 'admin_dash' %}">Admin</a></p>
    <p><a href="{% url 'logout' %}">Log Out</a></p>
  </div>
</div>
{% endblock header %}

{% block logocontainer %}{% endblock logocontainer %}

{% block main %}
{% comment %} <div class="flex-container widget-box"> {% endcomment %}

<div class="flex-container">
  
  <div class=" widget-box">
    <h2> Manage Licenses </h2>

    <p class="text-container"> {{ user.email }} - {{ contact_data.role }} - {{ contact_data.organization }}</p>

    <p>
    This screen displays the licenses for the entire Organization. If you want to view associated products, 
    click on 'View my products' menu item above.
    </p>
  </div>

<div id="licenses-tab" class="js-tabcontent">
  
  {% comment %} <div class="flex-container widget-box"> {% endcomment %}
    <div class="flex-container widget-box"> 
      <h3>Add License</h3>
      <form method="post">
          {% csrf_token %}
          {{ new_license_form }}
          <p><input class="button" name="save-license" type="submit" value="Save License"/></p>
      </form>

      <h3>Filter Licenses</h3>
      <form>
        <input id="license-search-button" type="button" value="Search"/>
        {{ license_search_form }}
        <p><input id="clear-license-search" class="button" type="reset" value="Clear"/></p>
      </form>
    </div>
  {% comment %} </div> {% endcomment %}

    <div class="flex-container widget-box flex-center">
      <h2 class="table-label"> Licenses </h2>
      <div class="table-container widget-box">
        <form method="post">
          {% csrf_token %}
            <table id="license-table" class="widget-table">
              <thead>
                <tr> 
                  <th></th>
                </tr>
              </thead>
            </table>
            <div class="flex-box flex-row">
              <p><input type="button" name="delete_license_button" id="delete-license-button" value="Delete"></p>
              <p><input type="submit" name="generate_license_selection" id="generate-license-selection" value="Generate"></p>  
            </div>
        </form>
      </div>
    </div>


 </div>



 <div id="products-tab" class="js-tabcontent">
  
  <div class="flex-box widget-box">
    <h3>Filter Products</h3>
    <form>
      <input id="entitlement-search-button" Value="Search" type="button">
      {{ entitlement_search_form }}
      <input type="reset" class="button" id="clear-entitlement-search" value="Clear">
    </form>
  </div>

  <h3 class="table-label">Product Entitlements</h3>
  <div class="table-container widget-box">
    <table id="entitlement-table" class="widget-table">
      <thead>
        <tr> 
          <th></th>
        </tr>
      </thead>
    </table>
  </div>

</div>
{% comment %} </div> {% endcomment %}
{% endblock main%}

{% block footer %}{% endblock footer %}